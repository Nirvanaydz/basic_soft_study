### 一、消息队列的使用场景

- 异步处理
- 流量控制
- 服务解耦

### 二、一个可靠的消息队列有什么特性，如何选择

- 消息的可靠传递
- 支持集群配置，保证可用性
- 性能开销要好

### 三、简单介绍几种消息队列

- rabbitMQ
    + 在producer和queue之间增加了exchange模块，通过路由规则将消息分发到不同的队列中
    + 对消息的堆积使用的不是很好
    + 性能较其他的消息队列较差，在十几万的qps
    + 编程语言冷门，定制化修改不方便
    + 消息模型
        - 严格遵循队列的设计模式
        - 使用exchange交换机实现发布订阅的方式
- rocketMQ
    + 品学兼优的中国学生
    + 几十万的qps
    + 较好的响应延时
    + 源代码易读，可定制
    + producer/consumer
    + broker--topic--n个队列对应给n个consumer使用，队列中存储偏移量来确认消费位置
- kafka
    + 2000w的qps
    + 异步批处理带来消息的等待，每秒钟的消息不多时，不建议使用kafka
    + kafka和rocket一直，只是queue变成了partition

### 四、保证消息的不丢失和重复消费

### 五、消息积压的处理

- 生产端
    + 准备数据和序列化，构造请求的过程
    + 发送消息和响应在网络中的耗时
    + broker处理消息的时延
- 消费端
    + 保证consumer和partition一致
    + 实际消费都是单线程的