### 记录内存某一个状态，内存快照
>- 类比拍照片，记录某个时刻的状态
>- 快速恢复，宕机后恢复方式，直接将内存数据加载
>- 对什么数据进行快照？
>- 快照时产生新的数据如何处理，是否阻塞当前主线程？
### 对什么数据进行快照-全量数据
- 生成快照文件指令
    >+ save，阻塞主线程
    >+ bgsave，redis-rdb默认配置，使用子线程完成快照文件
### bgsave工作原理
- fork子进程进行快照生成，共享主进程的内存，当存在数据变动时，这个变动只有在下一次快照时进入新的快照文件中
- 增量快照的思想，需要记录哪些数据需要发生了变动，这其实是一个很复杂的动作
- redis4.0后，推荐使用aof+rdb混合的方式，在两次快照中间记录增量写操作
    >1. 第一次全量快照
    >2. 在两次快照中使用AOF记录增量写操作，防止服务宕机时，部分数据的丢失
    >3. 第二次全量快照
    >4. 清空AOF记录