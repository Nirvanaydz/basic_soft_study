## 1、什么是操作系统
- operating system：管理计算机硬件和软资源的程序
- 屏蔽了硬件层的复杂性
- 操作系统的内核是操作系统的核心部分，负责系统的内存管理，硬件设备管理，文件系统的管理，应用程序的管理
- 系统的调用：
    + 用户态：访问用户程序的数据的程序
    + 系统态：可以访问任何的资源
        - 设备管理
        - 文件管理
        - 进程控制
        - 进程通信
            + 亲缘关系的父子进程和兄弟进程之间的通信--管道通信，pipes
            + 严格遵循先进先出fifo，实现本机任意两个进程通信，names pipes
            + 通知接收线程某个事件已经发生，信号--signal
            + 消息队列存在于内核中，实现消息的随机查询，也支持fifo，message queuing
                + 克服了信号承载量少
                + 管道无格式字节流
                + 缓存区大小受限的缺点
            + 信号量用于支持多进程对共享数据的访问，解决并同步信息并避免竞争
            + 共享内存，主要通过信号量和互斥锁完成操作
            + 通信的两方的约定，用套接字中相关的函数完成通信过程。客户端和服务器的通信
            + 线程间如何通信呢？
                - 互斥量，mutex，synchronized，lock
                - 信号量：允许多个被控制数量的线程访问同一资源
                - 事件通知（wait/notify）
        - 内存管理
            + 连续内存：块式管理，古老，效率低，会产生碎片
            + 非连续内存管理
                - 页式管理：将主内存分为固定的页，通过页表对应逻辑地址和物理地址
                    + 在页表方案基础上引入快表来加速虚拟内存地址到物理内存地址的转换
                    + 过程
                        - 根据虚拟内存地址在快表中查询
                        - 查询到的话，返回虚拟内存地址对应的物理内存地址
                        - 不在快表中，访问内存中的页表，从页表中查询得到内存的物理地址，同时将其保存至快表中
                        - 快表填满后，按照一定的淘汰策略淘汰掉快表中的一页
                - 段式管理：将主存分为一段段有意义的格式，通过段表对应逻辑地址和物理地址
                - 段页式管理：先分成一段段，再将段分为一页页，段与段，段内部都是离散的
        - 虚拟内存地址与物理内存地址
        - 虚拟内存
            + 使得应用程序认为其拥有连续的可用内存，实际上是很多的物理内存碎片组成，也有一部分存储在外部的磁盘中
            + 编写程序更加容易，对于物理内存的使用也更加有效率
        - 局部性原理：
            + 时间局部性：某个数据被访问过，那么不久以后可能被再次访问，程序中存在大量的循环操作
            + 空间局部性：某个被访问的存储单元，其附近的存储单元也将被访问，程序一段时间内访问的地址集中在一定范围内
        - 虚拟存储器：
            + 在局部性原理中，装入程序的部分就可以运行这个程序，其余部分保留在外存中，需要时将外存中的部分载入到内存，
                同时也将内存中暂时不需要用到的部分移动到外存中
            + 时间换空间的策略，消耗的是cpu计算页查找等工作的时间
        - 页面置换算法：发生在缺页中断时，无可用内存空间，移除部分页保证空间可用
            + opt：optimal
            + fifo：first in first out
            + lru：least recently used（最近最久未使用）
            + lfu：least frequently used（最少使用原则）